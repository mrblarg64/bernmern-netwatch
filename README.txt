This is an unfinished mess that leaks memory and doesn't use pthreads properly to tell the kernel I don't care about the thread exit result, maybe one day I'll get around to finishing it...
